tinymce.PluginManager.add("faqimage", function(e) {
	e.addButton("faqimage", {
		text : "Thư viện ảnh, video",
		icon : 'image',
		onclick : function() {
			console.log("click faq media");
			if(isAllowed){
				$("#faq_link_media_file").click();
	        	  }else{
	        		  redirectLogin();
	        	  }


			 $('#faq_media_file').on('faq_select_media_file',function(evt){
		       		var imageIDs=$('#faq_media_file').val();
		       		console.log(imageIDs);
		       		if(imageIDs!=null&&imageIDs!=""){
						var faq_key_image=imageIDs.split(";");
						var urlImage="";
						for (var i_faq_image in faq_key_image) {
							console.log(faq_key_image[i_faq_image]);
							var tempImage="";
							$.ajax({
								async:false,
								url : basePath + "/media/get-media/",
								type : "GET",
								dataType : "html",
								data : {media:faq_key_image[i_faq_image]},
								success : function(data) {

									tempImage=data;

								},
								error : function() {
									console.log("AJAX request was a failure");

								}
							});
							urlImage=urlImage+tempImage;
						}
						e.insertContent(urlImage);

					}
//		       		reset image list
		       		$('#faq_media_file').val("");


		     	 });

		}
	}), e.addMenuItem("faqimage", {
		text : "Thư viện media",
		icon : 'image',
		context : "insert",
		onclick : function() {
			console.log("click faq media");
			$("#faq_link_media_file").click();
			 $('#faq_media_file').on('faq_select_media_file',function(evt){
		       		var imageIDs=$('#faq_media_file').val();
		       		console.log(imageIDs);
		       		if(imageIDs!=null&&imageIDs!=""){
						var faq_key_image=imageIDs.split(";");
						var urlImage="";
						for (var i_faq_image in faq_key_image) {
							console.log(faq_key_image[i_faq_image]);
							var tempImage="";
							$.ajax({
								async:false,
								url : basePath + "/media/get-media",
								type : "GET",
								dataType : "html",
								data : {media:faq_key_image[i_faq_image]},
								success : function(data) {

									tempImage=data;

								},
								error : function() {
									console.log("AJAX request was a failure");

								}
							});
							urlImage=urlImage+tempImage;
						}
						e.insertContent(urlImage);

					}
//		       		reset image list
		       		$('#faq_media_file').val("");


		     	 });
		}
	});
});